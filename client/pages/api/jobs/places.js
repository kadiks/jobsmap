const places =  {"success":true,"data":[{"id":"56100","name":"LORIENT","type":"city","total":4,"coords":[47.75007,-3.36629]},{"name":"Loire Atlantique","type":"city","total":9,"coords":[47.409153,-1.542898]},{"id":"38600","name":"FONTAINE","type":"city","total":1,"coords":[45.19428,5.73163]},{"id":"69001","name":"LYON 01","type":"city","total":56,"coords":[45.72035,5.08666]},{"name":"Garonne (Haute)","type":"city","total":3,"coords":[43.4082,1.13894]},{"id":"75001","name":"PARIS 01","type":"city","total":110,"coords":[48.859,2.347]},{"id":"59000","name":"LILLE","type":"city","total":19,"coords":[50.629113,3.04584]},{"id":"33000","name":"BORDEAUX","type":"city","total":34,"coords":[44.851895,-0.587877]},{"id":"92300","name":"LEVALLOIS PERRET","type":"city","total":8,"coords":[48.894215,2.286846]},{"id":"83190","name":"OLLIOULES","type":"city","total":1,"coords":[43.13421,5.852582]},{"id":"59500","name":"DOUAI","type":"city","total":4,"coords":[50.379346,3.095098]},{"id":"22300","name":"LANNION","type":"city","total":2,"coords":[48.741177,-3.473691]},{"id":"35000","name":"RENNES","type":"city","total":31,"coords":[48.110899,-1.68365]},{"id":"91070","name":"BONDOUFLE","type":"city","total":1,"coords":[48.612324,2.376575]},{"id":"62100","name":"CALAIS","type":"city","total":1,"coords":[50.949559,1.866112]},{"id":"13001","name":"MARSEILLE 01","type":"city","total":8,"coords":[43.282,5.405]},{"id":"63000","name":"CLERMONT FERRAND","type":"city","total":5,"coords":[45.786766,3.10647]},{"id":"34000","name":"MONTPELLIER","type":"city","total":39,"coords":[43.610476,3.87048]},{"id":"90000","name":"BELFORT","type":"city","total":1,"coords":[47.640938,6.857469]},{"id":"31000","name":"TOULOUSE","type":"city","total":29,"coords":[43.603746,1.434497]},{"id":"92600","name":"ASNIERES SUR SEINE","type":"city","total":2,"coords":[48.918167,2.292385]},{"id":"91680","name":"BRUYERES LE CHATEL","type":"city","total":2,"coords":[48.588164,2.180588]},{"id":"57100","name":"THIONVILLE","type":"city","total":2,"coords":[49.370588,6.150624]},{"id":"34570","name":"PIGNAN","type":"city","total":1,"coords":[43.578699,3.760054]},{"id":"45800","name":"ST JEAN DE BRAYE","type":"city","total":1,"coords":[47.916216,1.967239]},{"id":"94200","name":"IVRY SUR SEINE","type":"city","total":3,"coords":[48.812752,2.386427]},{"id":"75008","name":"PARIS 08","type":"city","total":5,"coords":[48.859,2.347]},{"id":"91300","name":"MASSY","type":"city","total":2,"coords":[48.728133,2.269655]},{"id":"75012","name":"PARIS 12","type":"city","total":1,"coords":[48.859,2.347]},{"id":"92000","name":"NANTERRE","type":"city","total":8,"coords":[48.897,2.20237]},{"id":"73100","name":"TRESSERVE","type":"city","total":1,"coords":[45.676025,5.899967]},{"id":"06510","name":"CARROS","type":"city","total":1,"coords":[43.784043,7.191567]},{"id":"38000","name":"GRENOBLE","type":"city","total":22,"coords":[45.182081,5.7243]},{"id":"16000","name":"ANGOULEME","type":"city","total":2,"coords":[45.644018,0.148409]},{"id":"13013","name":"MARSEILLE 13","type":"city","total":1,"coords":[43.282,5.405]},{"id":"44100","name":"NANTES","type":"city","total":54,"coords":[47.239367,-1.555335]},{"id":"26000","name":"VALENCE","type":"city","total":4,"coords":[44.921477,4.922326]},{"id":"76000","name":"ROUEN","type":"city","total":3,"coords":[49.440286,1.093912]},{"id":"29200","name":"BREST","type":"city","total":6,"coords":[48.406567,-4.496254]},{"id":"92120","name":"MONTROUGE","type":"city","total":4,"coords":[48.815929,2.316207]},{"id":"49000","name":"ANGERS","type":"city","total":5,"coords":[47.466735,-0.56191]},{"id":"94160","name":"ST MANDE","type":"city","total":1,"coords":[48.841526,2.419441]},{"id":"06300","name":"NICE","type":"city","total":12,"coords":[43.712854,7.253866]},{"id":"91400","name":"SACLAY","type":"city","total":2,"coords":[48.747821,2.165494]},{"id":"59170","name":"CROIX","type":"city","total":1,"coords":[50.677402,3.155964]},{"id":"13090","name":"AIX EN PROVENCE","type":"city","total":27,"coords":[43.544778,5.401288]},{"id":"49300","name":"CHOLET","type":"city","total":5,"coords":[47.036408,-0.875399]},{"id":"35510","name":"CESSON SEVIGNE","type":"city","total":3,"coords":[48.123772,-1.596901]},{"id":"84300","name":"CAVAILLON","type":"city","total":2,"coords":[43.848858,5.032931]},{"id":"92100","name":"BOULOGNE BILLANCOURT","type":"city","total":11,"coords":[48.836972,2.242698]},{"id":"92130","name":"ISSY LES MOULINEAUX","type":"city","total":4,"coords":[48.8239,2.26287]},{"id":"33600","name":"PESSAC","type":"city","total":2,"coords":[44.785802,-0.676696]},{"id":"69300","name":"CALUIRE ET CUIRE","type":"city","total":7,"coords":[45.79472,4.846389]},{"id":"69800","name":"ST PRIEST","type":"city","total":3,"coords":[45.69639,4.943889]},{"id":"31670","name":"LABEGE","type":"city","total":2,"coords":[43.52917,1.53]},{"id":"47000","name":"AGEN","type":"city","total":2,"coords":[44.20306,0.618611]},{"id":"01000","name":"BOURG EN BRESSE","type":"city","total":1,"coords":[46.20472,5.228055]},{"id":"26200","name":"MONTELIMAR","type":"city","total":2,"coords":[44.55861,4.750834]},{"id":"73000","name":"CHAMBERY","type":"city","total":1,"coords":[45.56639,5.920833]},{"id":"69100","name":"VILLEURBANNE","type":"city","total":2,"coords":[45.76611,4.879445]},{"id":"42480","name":"LA FOUILLOUSE","type":"city","total":2,"coords":[45.50389,4.313611]},{"id":"74000","name":"ANNECY","type":"city","total":5,"coords":[45.89917,6.129445]},{"id":"74370","name":"METZ TESSY","type":"city","total":1,"coords":[45.94056,6.106389]},{"id":"69320","name":"FEYZIN","type":"city","total":2,"coords":[45.67278,4.858889]},{"id":"71380","name":"ST MARCEL","type":"city","total":1,"coords":[46.77555,4.889444]},{"id":"64300","name":"ORTHEZ","type":"city","total":1,"coords":[43.48806,-0.770833]},{"id":"74210","name":"FAVERGES SEYTHENEX","type":"city","total":1,"coords":[45.74667,6.293889]},{"id":"77550","name":"REAU","type":"city","total":1,"coords":[48.61055,2.623611]},{"id":"78140","name":"VELIZY VILLACOUBLAY","type":"city","total":3,"coords":[48.78333,2.188333]},{"id":"06560","name":"VALBONNE","type":"city","total":1,"coords":[43.64139,7.008889]},{"id":"92800","name":"PUTEAUX","type":"city","total":6,"coords":[48.88417,2.238055]},{"id":"44140","name":"LE BIGNON","type":"city","total":1,"coords":[47.09833,-1.490556]},{"id":"53000","name":"LAVAL","type":"city","total":1,"coords":[48.07278,-0.77]},{"id":"94000","name":"CRETEIL","type":"city","total":2,"coords":[48.79055,2.461944]},{"id":"53100","name":"MAYENNE","type":"city","total":1,"coords":[48.30305,-0.613611]},{"id":"94120","name":"FONTENAY SOUS BOIS","type":"city","total":1,"coords":[48.85167,2.477222]},{"id":"92200","name":"NEUILLY SUR SEINE","type":"city","total":3,"coords":[48.88722,2.2675]},{"id":"30250","name":"SOMMIERES","type":"city","total":1,"coords":[43.78444,4.09]},{"id":"10000","name":"TROYES","type":"city","total":2,"coords":[48.29889,4.078055]}]};

const getRandomKeywords = () => {
  const languages =Â ["php", "javascript", "go", "python", "c#"];
  const selectedLanguages = [];

  const keywordsNum = getRandomRange(languages.length) || 2; 

  while(selectedLanguages.length < keywordsNum) {
    const rLangIndex = getRandomRange(languages.length);
    const rTotal = getRandomRange(100);
    if (rTotal !== 0) {
      selectedLanguages.push({
        keyword: languages[rLangIndex],
        count: rTotal
      });
    }
  }

  return selectedLanguages;
};

const getRandomRange = (max) => {
  return Math.floor(Math.random() * max);
};
 
export default (req, res) => {
  const keywordPlaces = places.data.map((place) => {
    const keywords = getRandomKeywords();
    return {
      ...place,
      keywords
    }
  });
  res.status(200).json({
    status: true,
    data: keywordPlaces
  });
};
